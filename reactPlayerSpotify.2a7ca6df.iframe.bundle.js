/*! For license information please see reactPlayerSpotify.2a7ca6df.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_plone_volto=self.webpackChunk_plone_volto||[]).push([[4976],{"../../../node_modules/.pnpm/spotify-audio-element@1.0.3/node_modules/spotify-audio-element/dist/react.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return react_react_default}});var react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");const MATCH_SRC=/open\.spotify\.com\/(\w+)\/(\w+)/i;function getTemplateHTML(attrs,props={}){return`\n    <style>\n      :host {\n        display: inline-block;\n        min-width: 160px;\n        min-height: 80px;\n        position: relative;\n      }\n      iframe {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n      }\n      :host(:not([controls])) {\n        display: none !important;\n      }\n    </style>\n    <iframe${function serializeAttributes(attrs){let html="";for(const key in attrs){const value=attrs[key];html+=""===value?` ${key}`:` ${key}="${value}"`}return html}({src:serializeIframeUrl(attrs,props),scrolling:"no",frameborder:0,width:"100%",height:"100%",allow:"accelerometer; fullscreen; autoplay; encrypted-media; gyroscope; picture-in-picture"})}></iframe>\n  `}function serializeIframeUrl(attrs,props){var _a,_b,_c;if(!attrs.src)return;const matches=attrs.src.match(MATCH_SRC),type=matches&&matches[1],metaId=matches&&matches[2],params={t:null==(_a=props.config)?void 0:_a.startAt,theme:"dark"===(null==(_b=props.config)?void 0:_b.theme)?"0":null};return`https://open.spotify.com/embed/${type}/${metaId}${(null==(_c=props.config)?void 0:_c.preferVideo)?"/video":""}?${function serialize(props){return String(new URLSearchParams(function boolToBinary(props){let p={};for(let key in props){let val=props[key];!0===val||""===val?p[key]=1:!1===val?p[key]=0:null!=val&&(p[key]=val)}return p}(props)))}(params)}`}class SpotifyAudioElement extends(globalThis.HTMLElement??class{}){static getTemplateHTML=getTemplateHTML;static shadowRootOptions={mode:"open"};static observedAttributes=["controls","loop","src"];loadComplete=new PublicPromise;#loadRequested;#hasLoaded;#isInit;#isWaiting=!1;#closeToEnded=!1;#paused=!0;#currentTime=0;#duration=NaN;#seeking=!1;#config=null;constructor(){super(),this.#upgradeProperty("config")}async load(){var _a,_b,_c;if(this.#loadRequested)return;this.#hasLoaded&&(this.loadComplete=new PublicPromise),this.#hasLoaded=!0,await(this.#loadRequested=Promise.resolve()),this.#loadRequested=null,this.#isWaiting=!1,this.#closeToEnded=!1,this.#currentTime=0,this.#duration=NaN,this.#seeking=!1,this.dispatchEvent(new Event("emptied"));let oldApi=this.api;if(this.api=null,!this.src)return;this.dispatchEvent(new Event("loadstart"));const options={t:null==(_a=this.config)?void 0:_a.startAt,theme:"dark"===(null==(_b=this.config)?void 0:_b.theme)?"0":null,preferVideo:null==(_c=this.config)?void 0:_c.preferVideo};if(this.#isInit)this.api=oldApi,this.api.iframeElement.src=serializeIframeUrl(namedNodeMapToObject(this.attributes),this);else{this.#isInit=!0,this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=getTemplateHTML(namedNodeMapToObject(this.attributes),this));let iframe=this.shadowRoot.querySelector("iframe");const Spotify=await async function loadScript(src,globalName,readyFnName){if(loadScriptCache[src])return loadScriptCache[src];if(globalName&&self[globalName])return Promise.resolve(self[globalName]);return loadScriptCache[src]=new Promise(function(resolve,reject){const script=document.createElement("script");script.src=src;const ready=api=>resolve(api);readyFnName&&(self[readyFnName]=ready),script.onload=()=>!readyFnName&&ready(),script.onerror=reject,document.head.append(script)})}("https://open.spotify.com/embed-podcast/iframe-api/v1","SpotifyIframeApi","onSpotifyIframeApiReady");this.api=await new Promise(resolve=>Spotify.createController(iframe,options,resolve)),this.api.iframeElement=iframe,this.api.addListener("ready",()=>{this.dispatchEvent(new Event("loadedmetadata")),this.dispatchEvent(new Event("durationchange")),this.dispatchEvent(new Event("volumechange"))}),this.api.addListener("playback_update",event=>this.#closeToEnded&&this.#paused&&(event.data.isBuffering||!event.data.isPaused)?(this.#closeToEnded=!1,void(this.currentTime=1)):(event.data.duration/1e3!==this.#duration&&(this.#closeToEnded=!1,this.#duration=event.data.duration/1e3,this.dispatchEvent(new Event("durationchange"))),event.data.position/1e3!==this.#currentTime&&(this.#seeking=!1,this.#closeToEnded=!1,this.#currentTime=event.data.position/1e3,this.dispatchEvent(new Event("timeupdate"))),this.#isWaiting||this.#paused||!event.data.isPaused?!this.#paused||!event.data.isBuffering&&event.data.isPaused?this.#isWaiting&&!event.data.isPaused?(this.#isWaiting=!1,void this.dispatchEvent(new Event("playing"))):!this.paused&&!this.seeking&&!this.#closeToEnded&&Math.ceil(this.currentTime)>=this.duration?(this.#closeToEnded=!0,this.loop?void(this.currentTime=1):void(this.continuous||(this.pause(),this.dispatchEvent(new Event("ended"))))):void 0:(this.#paused=!1,this.dispatchEvent(new Event("play")),this.#isWaiting=event.data.isBuffering,void(this.#isWaiting?this.dispatchEvent(new Event("waiting")):this.dispatchEvent(new Event("playing")))):(this.#paused=!0,void this.dispatchEvent(new Event("pause")))))}this.loadComplete.resolve(),await this.loadComplete}async attributeChangedCallback(attrName,oldValue,newValue){oldValue!==newValue&&("src"!==attrName||this.load())}async play(){var _a;return this.#paused=!1,this.#isWaiting=!0,this.dispatchEvent(new Event("play")),await this.loadComplete,null==(_a=this.api)?void 0:_a.resume()}async pause(){var _a;return await this.loadComplete,null==(_a=this.api)?void 0:_a.pause()}get config(){return this.#config}set config(value){this.#config=value}get paused(){return this.#paused??!0}get muted(){return!1}set muted(val){}get volume(){return 1}set volume(val){}get ended(){return Math.ceil(this.currentTime)>=this.duration}get seeking(){return this.#seeking}get loop(){return this.hasAttribute("loop")}set loop(val){this.loop!=val&&this.toggleAttribute("loop",Boolean(val))}get currentTime(){return this.#currentTime}set currentTime(val){if(this.currentTime==val)return;this.#seeking=!0;let oldTime=this.#currentTime;this.#currentTime=val,this.dispatchEvent(new Event("timeupdate")),this.#currentTime=oldTime,this.loadComplete.then(()=>{var _a;null==(_a=this.api)||_a.seek(val)})}get duration(){return this.#duration}get src(){return this.getAttribute("src")}set src(val){this.setAttribute("src",`${val}`)}#upgradeProperty(prop){if(Object.prototype.hasOwnProperty.call(this,prop)){const value=this[prop];delete this[prop],this[prop]=value}}}function namedNodeMapToObject(namedNodeMap){let obj={};for(let attr of namedNodeMap)obj[attr.name]=attr.value;return obj}const loadScriptCache={};class PublicPromise extends Promise{constructor(executor=()=>{}){let res,rej;super((resolve,reject)=>{executor(resolve,reject),res=resolve,rej=reject}),this.resolve=res,this.reject=rej}}globalThis.customElements&&!globalThis.customElements.get("spotify-audio")&&globalThis.customElements.define("spotify-audio",SpotifyAudioElement);var spotify_audio_element_default=SpotifyAudioElement,reservedReactProps=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),reactPropToAttrNameMap={className:"class",htmlFor:"for"};function defaultToAttributeName(propName){return propName.toLowerCase()}function defaultToAttributeValue(propValue){return"boolean"==typeof propValue?propValue?"":void 0:"function"==typeof propValue||"object"==typeof propValue&&null!==propValue?void 0:propValue}function setProperty(node,name,value){var _a;node[name]=value,null==value&&name in((null==(_a=globalThis.HTMLElement)?void 0:_a.prototype)??{})&&node.removeAttribute(name)}var react_react_default=function createComponent({react:React2,tagName:tagName,elementClass:elementClass,events:events,displayName:displayName,defaultProps:defaultProps,toAttributeName:toAttributeName=defaultToAttributeName,toAttributeValue:toAttributeValue=defaultToAttributeValue}){const IS_REACT_19_OR_NEWER=Number.parseInt(React2.version)>=19,ReactComponent=React2.forwardRef((props,ref)=>{var _a,_b;const elementRef=React2.useRef(null),prevElemPropsRef=React2.useRef(new Map),eventProps={},attrs={},reactProps={},elementProps={};for(const[k,v]of Object.entries(props)){if(reservedReactProps.has(k)){reactProps[k]=v;continue}const attrName=toAttributeName(reactPropToAttrNameMap[k]??k);if(elementClass.prototype&&k in elementClass.prototype&&!(k in((null==(_a=globalThis.HTMLElement)?void 0:_a.prototype)??{}))&&!(null==(_b=elementClass.observedAttributes)?void 0:_b.some(attr=>attr===attrName))){elementProps[k]=v;continue}if(k.startsWith("on")){eventProps[k]=v;continue}const attrValue=toAttributeValue(v);if(attrName&&null!=attrValue&&(attrs[attrName]=String(attrValue),IS_REACT_19_OR_NEWER||(reactProps[attrName]=attrValue)),attrName&&IS_REACT_19_OR_NEWER){const attrValueFromDefault=defaultToAttributeValue(v);reactProps[attrName]=attrValue!==attrValueFromDefault?attrValue:v}}if("undefined"!=typeof window){for(const propName in eventProps){const callback=eventProps[propName],useCapture=propName.endsWith("Capture"),eventName=((null==events?void 0:events[propName])??propName.slice(2).toLowerCase()).slice(0,useCapture?-7:void 0);React2.useLayoutEffect(()=>{const eventTarget=null==elementRef?void 0:elementRef.current;if(eventTarget&&"function"==typeof callback)return eventTarget.addEventListener(eventName,callback,useCapture),()=>{eventTarget.removeEventListener(eventName,callback,useCapture)}},[null==elementRef?void 0:elementRef.current,callback])}React2.useLayoutEffect(()=>{if(null===elementRef.current)return;const newElemProps=new Map;for(const key in elementProps)setProperty(elementRef.current,key,elementProps[key]),prevElemPropsRef.current.delete(key),newElemProps.set(key,elementProps[key]);for(const[key,_value]of prevElemPropsRef.current)setProperty(elementRef.current,key,void 0);prevElemPropsRef.current=newElemProps})}if("undefined"==typeof window&&(null==elementClass?void 0:elementClass.getTemplateHTML)&&(null==elementClass?void 0:elementClass.shadowRootOptions)){const{mode:mode,delegatesFocus:delegatesFocus}=elementClass.shadowRootOptions,templateShadowRoot=React2.createElement("template",{shadowrootmode:mode,shadowrootdelegatesfocus:delegatesFocus,dangerouslySetInnerHTML:{__html:elementClass.getTemplateHTML(attrs,props)}});reactProps.children=[templateShadowRoot,reactProps.children]}return React2.createElement(tagName,{...defaultProps,...reactProps,ref:React2.useCallback(node=>{elementRef.current=node,"function"==typeof ref?ref(node):null!==ref&&(ref.current=node)},[ref])})});return ReactComponent.displayName=displayName??elementClass.name,ReactComponent}({react:react,tagName:"spotify-audio",elementClass:spotify_audio_element_default,toAttributeName(propName){return"muted"===propName?"":"defaultMuted"===propName?"muted":defaultToAttributeName(propName)}})}}]);