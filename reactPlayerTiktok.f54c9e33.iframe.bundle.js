/*! For license information please see reactPlayerTiktok.f54c9e33.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_plone_volto=self.webpackChunk_plone_volto||[]).push([[2432],{"../../../node_modules/.pnpm/tiktok-video-element@0.1.1/node_modules/tiktok-video-element/dist/react.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return react_react_default}});var react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");const MATCH_SRC=/tiktok\.com\/(?:player\/v1\/|share\/video\/|@[^/]+\/video\/)([0-9]+)/,PlayerState={INIT:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3},EventMap={[PlayerState.INIT]:"emptied",[PlayerState.PAUSED]:"pause",[PlayerState.ENDED]:"ended",[PlayerState.PLAYING]:"play",[PlayerState.BUFFERING]:"waiting"};function getTemplateHTML(attrs,props={}){const iframeAttrs={src:serializeIframeUrl(attrs,props),frameborder:0,width:"100%",height:"100%",allow:"accelerometer; autoplay; fullscreen; encrypted-media; gyroscope; picture-in-picture"};return props.config&&(iframeAttrs["data-config"]=JSON.stringify(props.config)),`\n    <style>\n      :host {\n        display:inline-block;\n        min-width: 300px;\n        min-height: 150px;\n        position: relative;\n      }\n      iframe {\n        position:absolute;\n        top:0;\n        left:0;\n        width:100%;\n        height:100%;\n        border:0;\n      }\n    </style>\n    <iframe ${function serializeAttributes(attrs){let html="";for(const key in attrs){const value=attrs[key];html+=""===value?` ${escapeHtml(key)}`:` ${escapeHtml(key)}="${escapeHtml(`${value}`)}"`}return html}(iframeAttrs)} title="TikTok video"></iframe>\n  `}function serializeIframeUrl(attrs,props={}){if(!attrs.src)return;const matches=attrs.src.match(MATCH_SRC);return`https://www.tiktok.com/player/v1/${matches&&matches[1]}?${function serialize(props){return String(new URLSearchParams(function boolToBinary(props){let p={};for(let key in props){let val=props[key];!0===val||""===val?p[key]=1:!1===val?p[key]=0:null!=val&&(p[key]=val)}return p}(props)))}({controls:""===attrs.controls?null:0,autoplay:attrs.autoplay,muted:attrs.muted,loop:attrs.loop,rel:0,...props.config})}`}class TikTokVideoElement extends(globalThis.HTMLElement??class{}){static getTemplateHTML=getTemplateHTML;static shadowRootOptions={mode:"open"};static get observedAttributes(){return["src","controls","loop","autoplay","muted"]}loadComplete=new PublicPromise;#loadRequested;#hasLoaded;#muted=!1;#currentTime=0;#paused=!0;#config=null;#volume=100;#duration=0;#iframe;constructor(){super(),this.#upgradeProperty("config")}async load(){if(this.#loadRequested)return;this.shadowRoot||this.attachShadow(TikTokVideoElement.shadowRootOptions);const isFirstLoad=!this.#hasLoaded;if(this.#hasLoaded&&(this.loadComplete=new PublicPromise),this.#hasLoaded=!0,await(this.#loadRequested=Promise.resolve()),this.#loadRequested=null,this.#currentTime=0,this.#muted=!1,this.#paused=!0,!this.src)return this.shadowRoot.innerHTML="",void globalThis.removeEventListener("message",this.#onMessage);let iframe=this.shadowRoot.querySelector("iframe");const attrs=function namedNodeMapToObject(namedNodeMap){let obj={};for(let attr of namedNodeMap)obj[attr.name]=attr.value;return obj}(this.attributes);isFirstLoad&&iframe&&(this.#config=JSON.parse(iframe.getAttribute("data-config")||"{}")),(null==iframe?void 0:iframe.src)&&iframe.src===serializeIframeUrl(attrs,this)||(this.shadowRoot.innerHTML=getTemplateHTML(attrs,this),iframe=this.shadowRoot.querySelector("iframe")),this.#iframe=iframe,globalThis.addEventListener("message",this.#onMessage)}async attributeChangedCallback(attrName,oldValue,newValue){if(oldValue!==newValue)switch(attrName){case"muted":await this.loadComplete,this.muted=null!=newValue;break;case"autoplay":case"controls":case"loop":case"src":return void this.load()}}get config(){return this.#config}set config(value){this.#config=value}#onMessage=event=>{var _a;if(event.source!==(null==(_a=this.#iframe)?void 0:_a.contentWindow))return;const msg=event.data;if(null==msg?void 0:msg["x-tiktok-player"])switch(msg.type){case"onPlayerReady":this.loadComplete.resolve();break;case"onStateChange":{this.#paused=[PlayerState.INIT,PlayerState.PAUSED,PlayerState.ENDED].includes(msg.value);const eventType=EventMap[msg.value];eventType&&this.dispatchEvent(new Event(eventType));break}case"onCurrentTime":this.#currentTime=msg.value.currentTime,this.#duration=msg.value.duration,this.dispatchEvent(new Event("durationchange")),this.dispatchEvent(new Event("timeupdate"));break;case"onVolumeChange":this.#volume=msg.value,this.dispatchEvent(new Event("volumechange"));break;case"onMute":this.#muted=!!msg.value,this.#volume=msg.value?0:this.#volume,this.dispatchEvent(new Event("volumechange"));break;case"onError":this.dispatchEvent(new Event("error"));break;default:console.warn("Unhandled TikTok player message:",msg)}};#post(type,value){var _a;if(!(null==(_a=this.#iframe)?void 0:_a.contentWindow))return;const message={"x-tiktok-player":!0,type:type,...void 0!==value?{value:value}:{}};this.#iframe.contentWindow.postMessage(message,"*")}async play(){await this.loadComplete,this.#post("play")}async pause(){await this.loadComplete,this.#post("pause")}async#seekTo(sec){await this.loadComplete,this.#post("seekTo",Number(sec))}async#mute(){await this.loadComplete,this.#post("mute")}async#unMute(){await this.loadComplete,this.#post("unMute")}get volume(){return this.#volume/100}set volume(_val){console.warn("Volume control is not supported for TikTok videos.")}get currentTime(){return this.#currentTime}set currentTime(val){this.#seekTo(val)}get muted(){return this.#muted}set muted(val){this.#muted=val,val?this.#mute():this.#unMute()}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(val){this.toggleAttribute("muted",!!val)}get paused(){return this.#paused}get duration(){return this.#duration}get src(){return this.getAttribute("src")}set src(val){this.setAttribute("src",val??"")}#upgradeProperty(prop){if(Object.prototype.hasOwnProperty.call(this,prop)){const value=this[prop];delete this[prop],this[prop]=value}}}class PublicPromise extends Promise{constructor(executor=()=>{}){let res,rej;super((resolve,reject)=>{executor(resolve,reject),res=resolve,rej=reject}),this.resolve=res,this.reject=rej}}function escapeHtml(str){return str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&#x60;")}globalThis.customElements&&!globalThis.customElements.get("tiktok-video")&&globalThis.customElements.define("tiktok-video",TikTokVideoElement);var tiktok_video_element_default=TikTokVideoElement,reservedReactProps=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),reactPropToAttrNameMap={className:"class",htmlFor:"for"};function defaultToAttributeName(propName){return propName.toLowerCase()}function defaultToAttributeValue(propValue){return"boolean"==typeof propValue?propValue?"":void 0:"function"==typeof propValue||"object"==typeof propValue&&null!==propValue?void 0:propValue}function setProperty(node,name,value){var _a;node[name]=value,null==value&&name in((null==(_a=globalThis.HTMLElement)?void 0:_a.prototype)??{})&&node.removeAttribute(name)}var react_react_default=function createComponent({react:React2,tagName:tagName,elementClass:elementClass,events:events,displayName:displayName,defaultProps:defaultProps,toAttributeName:toAttributeName=defaultToAttributeName,toAttributeValue:toAttributeValue=defaultToAttributeValue}){const IS_REACT_19_OR_NEWER=Number.parseInt(React2.version)>=19,ReactComponent=React2.forwardRef((props,ref)=>{var _a,_b;const elementRef=React2.useRef(null),prevElemPropsRef=React2.useRef(new Map),eventProps={},attrs={},reactProps={},elementProps={};for(const[k,v]of Object.entries(props)){if(reservedReactProps.has(k)){reactProps[k]=v;continue}const attrName=toAttributeName(reactPropToAttrNameMap[k]??k);if(elementClass.prototype&&k in elementClass.prototype&&!(k in((null==(_a=globalThis.HTMLElement)?void 0:_a.prototype)??{}))&&!(null==(_b=elementClass.observedAttributes)?void 0:_b.some(attr=>attr===attrName))){elementProps[k]=v;continue}if(k.startsWith("on")){eventProps[k]=v;continue}const attrValue=toAttributeValue(v);if(attrName&&null!=attrValue&&(attrs[attrName]=String(attrValue),IS_REACT_19_OR_NEWER||(reactProps[attrName]=attrValue)),attrName&&IS_REACT_19_OR_NEWER){const attrValueFromDefault=defaultToAttributeValue(v);reactProps[attrName]=attrValue!==attrValueFromDefault?attrValue:v}}if("undefined"!=typeof window){for(const propName in eventProps){const callback=eventProps[propName],useCapture=propName.endsWith("Capture"),eventName=((null==events?void 0:events[propName])??propName.slice(2).toLowerCase()).slice(0,useCapture?-7:void 0);React2.useLayoutEffect(()=>{const eventTarget=null==elementRef?void 0:elementRef.current;if(eventTarget&&"function"==typeof callback)return eventTarget.addEventListener(eventName,callback,useCapture),()=>{eventTarget.removeEventListener(eventName,callback,useCapture)}},[null==elementRef?void 0:elementRef.current,callback])}React2.useLayoutEffect(()=>{if(null===elementRef.current)return;const newElemProps=new Map;for(const key in elementProps)setProperty(elementRef.current,key,elementProps[key]),prevElemPropsRef.current.delete(key),newElemProps.set(key,elementProps[key]);for(const[key,_value]of prevElemPropsRef.current)setProperty(elementRef.current,key,void 0);prevElemPropsRef.current=newElemProps})}if("undefined"==typeof window&&(null==elementClass?void 0:elementClass.getTemplateHTML)&&(null==elementClass?void 0:elementClass.shadowRootOptions)){const{mode:mode,delegatesFocus:delegatesFocus}=elementClass.shadowRootOptions,templateShadowRoot=React2.createElement("template",{shadowrootmode:mode,shadowrootdelegatesfocus:delegatesFocus,dangerouslySetInnerHTML:{__html:elementClass.getTemplateHTML(attrs,props)}});reactProps.children=[templateShadowRoot,reactProps.children]}return React2.createElement(tagName,{...defaultProps,...reactProps,ref:React2.useCallback(node=>{elementRef.current=node,"function"==typeof ref?ref(node):null!==ref&&(ref.current=node)},[ref])})});return ReactComponent.displayName=displayName??elementClass.name,ReactComponent}({react:react,tagName:"tiktok-video",elementClass:tiktok_video_element_default,toAttributeName(propName){return"muted"===propName?"":"defaultMuted"===propName?"muted":defaultToAttributeName(propName)}})}}]);