/*! For license information please see reactPlayerYouTube.5a7d8eb0.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_plone_volto=self.webpackChunk_plone_volto||[]).push([[2344],{"../../../node_modules/.pnpm/youtube-video-element@1.6.2/node_modules/youtube-video-element/dist/react.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return react_react_default}});var react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js");const VIDEO_MATCH_SRC=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})/,PLAYLIST_MATCH_SRC=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/.*?[?&]list=)([\w_-]+)/;function getTemplateHTML(attrs,props={}){const iframeAttrs={src:serializeIframeUrl(attrs,props),frameborder:0,width:"100%",height:"100%",allow:"accelerometer; fullscreen; autoplay; encrypted-media; gyroscope; picture-in-picture"};return props.config&&(iframeAttrs["data-config"]=JSON.stringify(props.config)),`\n    <style>\n      :host {\n        display: inline-block;\n        line-height: 0;\n        position: relative;\n        min-width: 300px;\n        min-height: 150px;\n      }\n      iframe {\n        position: absolute;\n        top: 0;\n        left: 0;\n      }\n    </style>\n    <iframe${function serializeAttributes(attrs){let html="";for(const key in attrs){const value=attrs[key];html+=""===value?` ${escapeHtml(key)}`:` ${escapeHtml(key)}="${escapeHtml(`${value}`)}"`}return html}(iframeAttrs)}></iframe>\n  `}function serializeIframeUrl(attrs,props){if(!attrs.src)return;const embedBase=attrs.src.includes("-nocookie")?"https://www.youtube-nocookie.com/embed":"https://www.youtube.com/embed",params={controls:""===attrs.controls?null:0,autoplay:attrs.autoplay,loop:attrs.loop,mute:attrs.muted,playsinline:attrs.playsinline,preload:attrs.preload??"metadata",enablejsapi:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1,...props.config};if(VIDEO_MATCH_SRC.test(attrs.src)){const matches2=attrs.src.match(VIDEO_MATCH_SRC);return`${embedBase}/${matches2&&matches2[1]}?${serialize(params)}`}const matches=attrs.src.match(PLAYLIST_MATCH_SRC);return`${embedBase}?${serialize({listType:"playlist",list:matches&&matches[1],...params})}`}class YoutubeVideoElement extends(globalThis.HTMLElement??class{}){static getTemplateHTML=getTemplateHTML;static shadowRootOptions={mode:"open"};static observedAttributes=["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src"];loadComplete=new PublicPromise;#loadRequested;#hasLoaded;#readyState=0;#seeking=!1;#seekComplete;isLoaded=!1;#error=null;#config=null;constructor(){super(),this.#upgradeProperty("config")}get config(){return this.#config}set config(value){this.#config=value}async load(){if(this.#loadRequested)return;this.shadowRoot||this.attachShadow({mode:"open"});const isFirstLoad=!this.#hasLoaded;this.#hasLoaded&&(this.loadComplete=new PublicPromise,this.isLoaded=!1),this.#hasLoaded=!0,await(this.#loadRequested=Promise.resolve()),this.#loadRequested=null,this.#readyState=0,this.dispatchEvent(new Event("emptied"));let oldApi=this.api;if(this.api=null,!this.src)return void(null==oldApi||oldApi.destroy());this.dispatchEvent(new Event("loadstart"));let iframe=this.shadowRoot.querySelector("iframe"),attrs=function namedNodeMapToObject(namedNodeMap){let obj={};for(let attr of namedNodeMap)obj[attr.name]=attr.value;return obj}(this.attributes);isFirstLoad&&iframe&&(this.#config=JSON.parse(iframe.getAttribute("data-config")||"{}")),(null==iframe?void 0:iframe.src)&&iframe.src===serializeIframeUrl(attrs,this)||(this.shadowRoot.innerHTML=getTemplateHTML(attrs,this),iframe=this.shadowRoot.querySelector("iframe"));const YT=await async function loadScript(src,globalName,readyFnName){if(loadScriptCache[src])return loadScriptCache[src];if(globalName&&self[globalName])return await delay(0),self[globalName];return loadScriptCache[src]=new Promise(function(resolve,reject){const script=document.createElement("script");script.src=src;const ready=()=>resolve(self[globalName]);readyFnName&&(self[readyFnName]=ready),script.onload=()=>!readyFnName&&ready(),script.onerror=reject,document.head.append(script)})}("https://www.youtube.com/iframe_api","YT","onYouTubeIframeAPIReady");this.api=new YT.Player(iframe,{events:{onReady:()=>{this.#readyState=1,this.dispatchEvent(new Event("loadedmetadata")),this.dispatchEvent(new Event("durationchange")),this.dispatchEvent(new Event("volumechange")),this.dispatchEvent(new Event("loadcomplete")),this.isLoaded=!0,this.loadComplete.resolve()},onError:error=>{console.error(error),this.#error={code:error.data,message:`YouTube iframe player error #${error.data}; visit https://developers.google.com/youtube/iframe_api_reference#onError for the full error message.`},this.dispatchEvent(new Event("error"))}}});let playFired=!1;this.api.addEventListener("onStateChange",event=>{var _a;const state=event.data;if(state!==YT.PlayerState.PLAYING&&state!==YT.PlayerState.BUFFERING||playFired||(playFired=!0,this.dispatchEvent(new Event("play"))),state===YT.PlayerState.PLAYING)this.seeking&&(this.#seeking=!1,null==(_a=this.#seekComplete)||_a.resolve(),this.dispatchEvent(new Event("seeked"))),this.#readyState=3,this.dispatchEvent(new Event("playing"));else if(state===YT.PlayerState.PAUSED){const diff=Math.abs(this.currentTime-lastCurrentTime);!this.seeking&&diff>.1&&(this.#seeking=!0,this.dispatchEvent(new Event("seeking"))),playFired=!1,this.dispatchEvent(new Event("pause"))}state===YT.PlayerState.ENDED&&(playFired=!1,this.dispatchEvent(new Event("pause")),this.dispatchEvent(new Event("ended")),this.loop&&this.play())}),this.api.addEventListener("onPlaybackRateChange",()=>{this.dispatchEvent(new Event("ratechange"))}),this.api.addEventListener("onVolumeChange",()=>{this.dispatchEvent(new Event("volumechange"))}),this.api.addEventListener("onVideoProgress",()=>{this.dispatchEvent(new Event("timeupdate"))}),await this.loadComplete;let lastBufferedEnd,lastCurrentTime=0;setInterval(()=>{var _a;const diff=Math.abs(this.currentTime-lastCurrentTime),bufferedEnd=this.buffered.end(this.buffered.length-1);this.seeking&&bufferedEnd>.1?(this.#seeking=!1,null==(_a=this.#seekComplete)||_a.resolve(),this.dispatchEvent(new Event("seeked"))):!this.seeking&&diff>.1&&(this.#seeking=!0,this.dispatchEvent(new Event("seeking"))),lastCurrentTime=this.currentTime},50);const progressInterval=setInterval(()=>{const bufferedEnd=this.buffered.end(this.buffered.length-1);bufferedEnd>=this.duration&&(clearInterval(progressInterval),this.#readyState=4),lastBufferedEnd!=bufferedEnd&&(lastBufferedEnd=bufferedEnd,this.dispatchEvent(new Event("progress")))},100)}async attributeChangedCallback(attrName,oldValue,newValue){if(oldValue!==newValue)switch(attrName){case"src":case"autoplay":case"controls":case"loop":case"playsinline":this.load()}}async play(){var _a;return this.#seekComplete=null,await this.loadComplete,null==(_a=this.api)||_a.playVideo(),function createPlayPromise(player){return function promisify(fn){return(...args)=>new Promise(resolve=>{fn(...args,(...res)=>{res.length>1?resolve(res):resolve(res[0])})})}((event,cb)=>{let fn;player.addEventListener(event,fn=()=>{player.removeEventListener(event,fn),cb()})})("playing")}(this)}async pause(){var _a;return await this.loadComplete,null==(_a=this.api)?void 0:_a.pauseVideo()}get seeking(){return this.#seeking}get readyState(){return this.#readyState}get src(){return this.getAttribute("src")}set src(val){this.src!=val&&this.setAttribute("src",val)}get error(){return this.#error}get paused(){var _a,_b;return this.isLoaded?[-1,0,2,5].includes(null==(_b=null==(_a=this.api)?void 0:_a.getPlayerState)?void 0:_b.call(_a)):!this.autoplay}get duration(){var _a,_b;return(null==(_b=null==(_a=this.api)?void 0:_a.getDuration)?void 0:_b.call(_a))??NaN}get autoplay(){return this.hasAttribute("autoplay")}set autoplay(val){this.autoplay!=val&&this.toggleAttribute("autoplay",Boolean(val))}get buffered(){var _a,_b;if(!this.isLoaded)return createTimeRanges();const progress=(null==(_a=this.api)?void 0:_a.getVideoLoadedFraction())*(null==(_b=this.api)?void 0:_b.getDuration());return progress>0?createTimeRanges(0,progress):createTimeRanges()}get controls(){return this.hasAttribute("controls")}set controls(val){this.controls!=val&&this.toggleAttribute("controls",Boolean(val))}get currentTime(){var _a,_b;return(null==(_b=null==(_a=this.api)?void 0:_a.getCurrentTime)?void 0:_b.call(_a))??0}set currentTime(val){this.currentTime!=val&&(this.#seekComplete=new PublicPromise,this.loadComplete.then(()=>{var _a,_b;null==(_a=this.api)||_a.seekTo(val,!0),this.paused&&(null==(_b=this.#seekComplete)||_b.then(()=>{var _a2;this.#seekComplete&&(null==(_a2=this.api)||_a2.pauseVideo())}))}))}set defaultMuted(val){this.defaultMuted!=val&&this.toggleAttribute("muted",Boolean(val))}get defaultMuted(){return this.hasAttribute("muted")}get loop(){return this.hasAttribute("loop")}set loop(val){this.loop!=val&&this.toggleAttribute("loop",Boolean(val))}set muted(val){this.muted!=val&&this.loadComplete.then(()=>{var _a,_b;val?null==(_a=this.api)||_a.mute():null==(_b=this.api)||_b.unMute()})}get muted(){var _a,_b;return this.isLoaded?null==(_b=null==(_a=this.api)?void 0:_a.isMuted)?void 0:_b.call(_a):this.defaultMuted}get playbackRate(){var _a,_b;return(null==(_b=null==(_a=this.api)?void 0:_a.getPlaybackRate)?void 0:_b.call(_a))??1}set playbackRate(val){this.playbackRate!=val&&this.loadComplete.then(()=>{var _a;null==(_a=this.api)||_a.setPlaybackRate(val)})}get playsInline(){return this.hasAttribute("playsinline")}set playsInline(val){this.playsInline!=val&&this.toggleAttribute("playsinline",Boolean(val))}get poster(){return this.getAttribute("poster")}set poster(val){this.poster!=val&&this.setAttribute("poster",`${val}`)}set volume(val){this.volume!=val&&this.loadComplete.then(()=>{var _a;null==(_a=this.api)||_a.setVolume(100*val)})}get volume(){var _a;return this.isLoaded?(null==(_a=this.api)?void 0:_a.getVolume())/100:1}#upgradeProperty(prop){if(Object.prototype.hasOwnProperty.call(this,prop)){const value=this[prop];delete this[prop],this[prop]=value}}}function escapeHtml(str){return str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&#x60;")}function serialize(props){return String(new URLSearchParams(function boolToBinary(props){let p={};for(let key in props){let val=props[key];!0===val||""===val?p[key]=1:!1===val?p[key]=0:null!=val&&(p[key]=val)}return p}(props)))}const loadScriptCache={};const delay=ms=>new Promise(resolve=>setTimeout(resolve,ms));class PublicPromise extends Promise{constructor(executor=()=>{}){let res,rej;super((resolve,reject)=>{executor(resolve,reject),res=resolve,rej=reject}),this.resolve=res,this.reject=rej}}function createTimeRanges(start,end){return Array.isArray(start)?createTimeRangesObj(start):createTimeRangesObj(null==start||null==end||0===start&&0===end?[[0,0]]:[[start,end]])}function createTimeRangesObj(ranges){return Object.defineProperties(ranges,{start:{value:i=>ranges[i][0]},end:{value:i=>ranges[i][1]}}),ranges}globalThis.customElements&&!globalThis.customElements.get("youtube-video")&&globalThis.customElements.define("youtube-video",YoutubeVideoElement);var youtube_video_element_default=YoutubeVideoElement,reservedReactProps=new Set(["style","children","ref","key","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML"]),reactPropToAttrNameMap={className:"class",htmlFor:"for"};function defaultToAttributeName(propName){return propName.toLowerCase()}function defaultToAttributeValue(propValue){return"boolean"==typeof propValue?propValue?"":void 0:"function"==typeof propValue||"object"==typeof propValue&&null!==propValue?void 0:propValue}function setProperty(node,name,value){var _a;node[name]=value,null==value&&name in((null==(_a=globalThis.HTMLElement)?void 0:_a.prototype)??{})&&node.removeAttribute(name)}var react_react_default=function createComponent({react:React2,tagName:tagName,elementClass:elementClass,events:events,displayName:displayName,defaultProps:defaultProps,toAttributeName:toAttributeName=defaultToAttributeName,toAttributeValue:toAttributeValue=defaultToAttributeValue}){const IS_REACT_19_OR_NEWER=Number.parseInt(React2.version)>=19,ReactComponent=React2.forwardRef((props,ref)=>{var _a,_b;const elementRef=React2.useRef(null),prevElemPropsRef=React2.useRef(new Map),eventProps={},attrs={},reactProps={},elementProps={};for(const[k,v]of Object.entries(props)){if(reservedReactProps.has(k)){reactProps[k]=v;continue}const attrName=toAttributeName(reactPropToAttrNameMap[k]??k);if(elementClass.prototype&&k in elementClass.prototype&&!(k in((null==(_a=globalThis.HTMLElement)?void 0:_a.prototype)??{}))&&!(null==(_b=elementClass.observedAttributes)?void 0:_b.some(attr=>attr===attrName))){elementProps[k]=v;continue}if(k.startsWith("on")){eventProps[k]=v;continue}const attrValue=toAttributeValue(v);if(attrName&&null!=attrValue&&(attrs[attrName]=String(attrValue),IS_REACT_19_OR_NEWER||(reactProps[attrName]=attrValue)),attrName&&IS_REACT_19_OR_NEWER){const attrValueFromDefault=defaultToAttributeValue(v);reactProps[attrName]=attrValue!==attrValueFromDefault?attrValue:v}}if("undefined"!=typeof window){for(const propName in eventProps){const callback=eventProps[propName],useCapture=propName.endsWith("Capture"),eventName=((null==events?void 0:events[propName])??propName.slice(2).toLowerCase()).slice(0,useCapture?-7:void 0);React2.useLayoutEffect(()=>{const eventTarget=null==elementRef?void 0:elementRef.current;if(eventTarget&&"function"==typeof callback)return eventTarget.addEventListener(eventName,callback,useCapture),()=>{eventTarget.removeEventListener(eventName,callback,useCapture)}},[null==elementRef?void 0:elementRef.current,callback])}React2.useLayoutEffect(()=>{if(null===elementRef.current)return;const newElemProps=new Map;for(const key in elementProps)setProperty(elementRef.current,key,elementProps[key]),prevElemPropsRef.current.delete(key),newElemProps.set(key,elementProps[key]);for(const[key,_value]of prevElemPropsRef.current)setProperty(elementRef.current,key,void 0);prevElemPropsRef.current=newElemProps})}if("undefined"==typeof window&&(null==elementClass?void 0:elementClass.getTemplateHTML)&&(null==elementClass?void 0:elementClass.shadowRootOptions)){const{mode:mode,delegatesFocus:delegatesFocus}=elementClass.shadowRootOptions,templateShadowRoot=React2.createElement("template",{shadowrootmode:mode,shadowrootdelegatesfocus:delegatesFocus,dangerouslySetInnerHTML:{__html:elementClass.getTemplateHTML(attrs,props)}});reactProps.children=[templateShadowRoot,reactProps.children]}return React2.createElement(tagName,{...defaultProps,...reactProps,ref:React2.useCallback(node=>{elementRef.current=node,"function"==typeof ref?ref(node):null!==ref&&(ref.current=node)},[ref])})});return ReactComponent.displayName=displayName??elementClass.name,ReactComponent}({react:react,tagName:"youtube-video",elementClass:youtube_video_element_default,toAttributeName(propName){return"muted"===propName?"":"defaultMuted"===propName?"muted":defaultToAttributeName(propName)}})}}]);